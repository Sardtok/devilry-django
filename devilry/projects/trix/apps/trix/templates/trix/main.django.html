{% extends "trix/base.django.html" %}

{% load i18n %}

{% block title %}Ukesoppgaver{% endblock %}

{% block nav-class %}trix{% endblock %}

{% block headextra %}
  <link rel="stylesheet" href="{{ DEVILRY_STATIC_URL }}/trix/style.css" />
  <link rel="stylesheet" media="print"
        href="{{ DEVILRY_STATIC_URL }}/trix/print.css" />
  <script type="text/javascript">
    toggleExc = function(link) {
      elem = link;
      while (elem && elem.id != 'exctext') {
        elem = elem.nextSibling;
      }

      if (elem) {
        if (elem.style.display == 'none') {
          elem.style.display = 'block';
          link.innerHTML = "{% trans "Hide exercise" %}";
        } else {
          elem.style.display = 'none';
          link.innerHTML = "{% trans "Show exercise" %}";
        }
      }
    }
  </script>
{% endblock %}

{% block main %}
<div class="xptopic">Level: {{ level_info.level }}</div>
<div class="xpbar" style="width: 25%;">
  <div style="width: {{level_info.percentage}}%;">
    {{ level_info.points_on_level }}/{{ level_info.level_points }}
  </div>
  &nbsp;</div>
<div style="clear: left;">Points: {{ level_info.total_points }}</div>

{% for p, p_excs in exercises.items %}
  <form autocomplete="off">
  <table class="exercises">
    <caption>{% trans "Exercises" %} —
      {{ p.parentnode.long_name }} —
      {{ p.long_name }}</caption>
    <thead>
      <tr>
        <th
           {% if statuses %}class="maincol"{% endif %}
           >{% trans "Exercise" %}</th>
        {% if statuses %}
          {% for status in statuses %}
            <th class="statusbutton">{{ status.name }}</th>
          {% endfor %}
          <th class="statusbutton">{% trans "Unsolved" %}</th>
        {% endif %}
      </tr>
    </thead>
    <tbody>
        
      {% for id, e in p_excs.items %}
      <tr>
        <td
           {% if statuses %}class="maincol"{% endif %}
           >
          {% if statuses %}
          <a id="dispexc" href="javascript:void(0)"
             onClick="toggleExc(this)" style="float: right;">
            {% trans "Show exercise" %}
          </a>
          {% endif %}
          <h3>{{ e.title }}</h3>
          {% autoescape off %}
          <div id="exctext"
               {% if statuses %}style="display: none"{% endif %}
               >{{ e.text }}</div>
          {% endautoescape %}
        </td>
        {% if statuses %}
          {% for status in statuses %}
            <td class="statusbutton">
              <input type="radio" name="{{ id }}" value="{{ status.id }}"
                     {% if e.status == status.id %}
                     checked="checked"
                     {% endif %}
                     />
            </td>
          {% endfor %}
          <td class="statusbutton">
            <input type="radio" name="{{ id }}" value="-1"
                     {% if e.status == -1 %}
                     checked="checked"
                     {% endif %}
                     />
          </td>
        {% endif %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
  </form>
{% endfor %}
{% endblock %}
